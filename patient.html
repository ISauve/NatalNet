<head>
<title>NatalNet</title>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="style.css">
<link href="https://fonts.googleapis.com/css?family=Maitree:400,700|Open+Sans:300,400,700" rel="stylesheet">
</head>

<body style="padding-top:40px">
 <!-- Fixed navbar -->
    <!--nav-->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
        	<span class="icon-bar"></span>
        	<span class="icon-bar"></span>
        	<span class="icon-bar"></span>
          </button>
            
          <a class="navbar-brand" href="index.html">NatalNet</a>
        </div>
<div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="patient.html">Patient Directory</a></li>
        </div>
      </div>
    </nav>


    <div class="container">
    	<br>
    	<div class="row">
			<div class="col-lg-12 col-md-12 col-xs-12">
			
	<br>
    	<div id="Items"></div>

			</div>
    </div>
    	</div>



<script type="text/javascript">
var JSONURL = 'https://smaccess-226ac.firebaseio.com/.json';


function downloadData(url) {
        var xhttp = new XMLHttpRequest();
        xhttp.open( "GET", url, false );
        xhttp.send( null );
        return xhttp.responseText;
    }

var data = downloadData(JSONURL);
var obj = JSON.parse(data);

for (var i = 0; i < Object.keys(obj).length; i++){

var phone = Object.keys(obj)[i];
obj = Object.values(obj);
var q = Object.values(obj[i].questions);
console.log();

	var totalQ = " ";
for (var j = Object.keys(obj[i].questions).length - 1; j >= 0; j--){

	totalQ +="<tr><td><span>- "+q[j].question+"</span></td></tr>";
}

var raw = document.createElement('div');
raw.className = "card";
raw.innerHTML ="<button type=\"button\" class=\"btn patientpage\" data-toggle=\"modal\" data-target=\"#"+obj[i].first_name+"\"><h1>"+obj[i].first_name +" "+obj[i].last_name +" <span class=\"risk\">"+obj[i].months_along +" Months </span><span class=\"glyphicon glyphicon-calendar risk\" aria-hidden=\"true\"> </h1></button><br>"+
	"<div class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"mySmallModalLabel\" aria-hidden=\"true\" id=\""+obj[i].first_name+"\"><div class=\"modal-dialog modal-lg\"><div class=\"modal-content\"><div class=\"card info\"><h1>Patient Info</h1><br>"+
	"<table><tr width=\"100%\">	<td width=\"10%\"><span class=\"field\">Name:</span></td><td width=\"40%\"><span>"+obj[i].first_name +" "+obj[i].last_name +"</span></td><td width=\"10%\"><span class=\"field\">Age:</span></td><td width=\"40%\"><span>"+obj[i].age +"</span></td></tr> <tr><td><span class=\"field\">Location:</span></td><td><span>"+obj[i].location +"</span></td><td><span class=\"field\">Phone:</span></td><td><span>"+phone+"</span></td></tr></table>"+
		"<br><table><tr width=\"100%\"><td><span class=\"field\">Timeline:</span></td></tr>"+totalQ+"</table></div></div></div></div>";

document.getElementById("Items").appendChild(raw);  }
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/js/bootstrap.min.js" integrity="sha384-BLiI7JTZm+JWlgKa0M0kGRpJbF2J8q+qreVrKBC47e3K6BW78kGLrCkeRX6I9RoK" crossorigin="anonymous"></script>


</body> 
